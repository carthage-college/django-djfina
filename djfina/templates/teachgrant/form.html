{% extends "djkorra/base.html" %}
<!doctype html>
<html lang='en'>
    {% block content_head %}
        <h1 id="page-title">TEACH Grant Form</h1>
    {% endblock %}
<head>
    <meta charset='utf-8' />
    <title></title>
    {% block extra_style %}
    <style>
        input[type=checkbox]
        {
          -webkit-appearance:checkbox;
        }
        input[type=radio]
        {
          -webkit-appearance:radio;
        }
    </style>
    <link href="//www.carthage.edu/themes/shared/css/icons.css" type="text/css" rel="stylesheet" />
    <link href="//www.carthage.edu/static/vendor/dashboard/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="//www.carthage.edu/themes/shared/css/forms.css" rel="stylesheet" type="text/css" />
    <link href="//www.carthage.edu/themes/shared/css/tables.css" rel="stylesheet" type="text/css" />
    {% endblock %}
    {% block javascript %}
    <script type='text/javascript'>
        function validate_carthage_id(){
            var id = document.getElementById('id_carthage_id');
            var val = id.value;
            var patt = new RegExp('^(\\d{5,7})$');
            return patt.test(val);
        }
        function validate_student_name(){
            var id = document.getElementById('id_student_name');
            var val = id.value;
            var patt = new RegExp('^((?:[a-zA-Z]+\\s?){1,2}[a-zA-Z]+)$');
            return patt.test(val);
        }
        function validate_TEACH_grant_eligible_program_of_study(){
            var id = document.getElementById('id_TEACH_grant_eligible_program_of_study');
            var val = id.value;
            var patt = new RegExp('^((?:[a-zA-Z\\s?\\.?]+)[a-zA-Z]+)$');
            return patt.test(val);
        }
    </script>
    {% endblock %}
</head>
{% block content %}
<body>
    <form action='' method='post' class = "form">{% csrf_token %}
        {% for field in form.hidden_fields %}
            {{ field }}
        {% endfor %}
       <fieldset class="blockLabels">
            <legend>TEACH Info</legend>
            <ol>
                <li>The Federal TEACH Grant has specific eligibility and service requirements.
                    Before completing the TEACH Grant Consideration form, you should visit the
                    <a href='http://studentaid.ed.gov/PORTALSWebApp/students/english/teach.jsp'>Federal TEACH Grant web site.</a>
                    If you wish to apply for consideration for this grant, you will need to:
                    <ul class="bullets">
                        <li>Complete a {{ year }}-{{ year2 }} Free Application for Federal Student Aid (FAFSA) at <a href='http://fafsa.ed.gov'>http://fafsa.ed.gov</a> and provide all supporting application materials that may be required while reviewing your FAFSA.</li>
                        <li>Sign the online Agreement to Serve (ATS) and complete the Federal TEACH Grant Entrance Counseling requirement at <a href='https://teach-ats.ed.gov/ats/index.action'>https://teach-ats.ed.gov/ats/index.action</a></li>
                    </ul>
                </li>
            </ol>
        </fieldset>
       <fieldset class="blockLabels">
            <legend>Area of Study</legend>
            <ol>
                <li class="ctrlHolder"><h3><label for="id_TEACH_grant_eligible_program_of_study">Indicate your TEACH grant eligible program of study</label></h3>
                    <div class="required">
                        <input id="id_TEACH_grant_eligible_program_of_study" maxlength="100" name="name" type="text" />                        
                        <img style='display:none;' id='TEACH_grant_eligible_program_of_study_yes' src='http://imageshack.us/a/img716/1391/htj.png'></img>
                        <img style='display:none;' id='TEACH_grant_eligible_program_of_study_no' src='http://imageshack.us/a/img855/1123/ytjo.png'></img>
                    </div>
                </li>
            </ol>
        </fieldset>
       <fieldset class="blockLabels">
            <legend>Section 1: GPA Requirement Certification</legend>
            <ol>
                <li class="ctrlHolder"><h3><label for="id_gpa_requirements_0">Current Status</label></h3>
                    <ul>
                        <li><label for="id_gpa_requirements_0"><input id="id_gpa_requirements_0" name="gpa" type="radio" value="CONT" />Continuing Undergrad And Graduate Students</label></li>
                        <li><label for="id_gpa_requirements_1"><input id="id_gpa_requirements_1" name="gpa" type="radio" value="NEWF" />New Freshmen Students</label></li>
                        <li><label for="id_gpa_requirements_2"><input id="id_gpa_requirements_2" name="gpa" type="radio" value="NEWU" />New Undergrad Transfer Students</label></li>
                        <li><label for="id_gpa_requirements_3"><input id="id_gpa_requirements_3" name="gpa" type="radio" value="NEWG" />New Graduate Students</label></li>
                    </ul>
                    <li id='hidden-gpa'>
                        I certify that I have established a 3.25 overall GPA or higher at Carthage
                    </li>
                </li>
            </ol>
        </fieldset>
       <fieldset class="blockLabels">
            <legend>Section 2: Program Certification</legend>
            <ol>
                <!-- The next <li> needs to be hidden right off the get go -->
                <li id='hidden-undergrad' style='display:none;' class='ctrlHolder'><h3>
                    <label for="id_undergrad_enrolled_in_grant_eligible_program">
                        <input id="id_undergrad_enrolled_in_grant_eligible_program" name="undergrad" type="checkbox" />
                        I certify that I am enrolled or accepted for enrollment as a degree-seeking student
                        in a TEACH Grant-eligible program</label></h3>                        
                </li>
                <li id='hidden-grad' class='ctrlHolder'><h3>
                    <label for="id_grad_enrolled_in_grant_eligible_program">
                        <input id="id_grad_enrolled_in_grant_eligible_program" name="grad" type="checkbox" />
                        I certify that I am enrolled or accepted for enrollment as a degree-seeking student
                        in a TEACH Grant-eligible program</label></h3>                        
                </li>
                <li class="ctrlHolder"><h3><label for="id_filed_fafsa"><input id="id_filled_fafsa"
                    name="fafsa" type="checkbox" />I filed or will file a Free Application for
                    Federal Student Aid (FAFSA) for the {{ year }}-{{ year2 }} academic year</label></h3>
                <li>
                <li class="ctrlHolder"><h3><label for="id_understand_conditions"><input id="id_understand_conditions"
                    name="understand" type="checkbox" />I understand that if I am awarded a Federal TEACH Grant,
                    I must do the following
                    <li><ul class="bullets">
                            <li>Sign the online Agreement to Serve (ATS) and complete the Federal TEACH Grant Entrance Counseling requirement at <a href='https://teach-ats.ed.gov/ats/index.action'>https://teach-ats.ed.gov/ats/index.action</a></li>
                            <li>Continue participation as a degree-seeking student in a TEACH Grant-eligible program at Carthage</li>
                            <li>Maintain a 3.25 cumulative GPA each semester of my enrollment in my TEACH Grant-eligible program</li>
                        </ul></li>                        
                    </label></h3>
                <li class="btnHolder">
                    <label for="submit">&nbsp;&nbsp;</label>
                    <input type="Submit" name="submit" value="Submit" class="button"/>
                </li>
            </ol>
        </fieldset>
    </form>
</body>
    <script type='text/javascript'>
        if( document.getElementsByName('gpa').value == 'CONT' ){
            document.getElementById('hidden-undergrad').style.display = 'list-item';
            document.getElementById('hidden-grad').style.display = 'none'; //Hide this
            //If the top select option is selected, the only checkbox that will pop up is the undergrad box
        }
        else if( document.getElementsByName('gpa').value == 'NEWF' ||
                document.getElementsByName('gpa').value == 'NEWU' ){   
            document.getElementById('hidden-undergrad').style.display = 'list-item';
            document.getElementById('hidden-grad').style.display = 'none';
        }
        else if( document.getElementsByName('gpa').value == 'NEWG' ){
            document.getElementById('hidden-undergrad').style.display = 'none';
            document.getElementById('hidden-grad').style.display = 'list-item';
        }
        
        var element = document.getElementsByName('gpa');
        for (var i = 0; i < element.length; i++)
        {
            element[i].onclick = function() {
                var value = this.value;
                var undergrad = document.getElementById('hidden-undergrad'); 
                var grad = document.getElementById('hidden-grad');
                var gpa = document.getElementById('hidden-gpa');
                if (value == "CONT"){
                    undergrad.style.display = 'list-item';
                    grad.style.display = 'none'; //Hide this
                    
                    gpa.innerText = 'I certify that I have established a 3.25 overall GPA or higher at Carthage'
                }
                else if (value == 'NEWF' ||
                         value == 'NEWU' ){
                    undergrad.style.display = 'list-item';
                    grad.style.display = 'none';
                    
                    if ( value == 'NEWF' ){
                        gpa.innerText = 'I certify that I have scored above the 75th percentile on a college admissions test or maintained a FINAL cumulative high school GPA of at least 3.25'
                    }
                    else{
                        gpa.innerText = 'I certify that I have established a 3.25 overall GPA in my previous undergraduate coursework'
                    }
                }
                else if (value == 'NEWG' ){
                    undergrad.style.display = 'none';
                    grad.style.display = 'list-item';
                    
                    gpa.innerText = 'I certify that I have established a 3.25 overall GPA in my previous undergraduate coursework'
                }
            };
        }        
        //set all checks and x's to be invisible till user types something into field
        document.getElementById('TEACH_grant_eligible_program_of_study_no').style.display='none';
        document.getElementById('TEACH_grant_eligible_program_of_study_yes').style.display='none';
        //functions that validate fields and show images for ok or bad data
        element = document.getElementById('id_TEACH_grant_eligible_program_of_study');
        element.onblur = function() {
            var n=document.getElementById('TEACH_grant_eligible_program_of_study_no');
            var y=document.getElementById('TEACH_grant_eligible_program_of_study_yes');
            if(!validate_TEACH_grant_eligible_program_of_study()){ 
                n.style.display='inline'; y.style.display='none'; 
            }
            else {
                n.style.display='none'; y.style.display='inline';
            }
        };
    </script>
    {% endblock %}
</html>
